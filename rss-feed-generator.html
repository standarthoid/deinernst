<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSS-Feed Generator - Dein Ernst?!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #FF7D00 0%, #FFE500 100%);
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            color: #FF7D00;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f9f9f9;
            border-radius: 12px;
            border-left: 5px solid #FFE500;
        }

        .section h2 {
            color: #333;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        input[type="text"],
        input[type="url"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            margin-bottom: 15px;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #FF7D00;
        }

        .json-input {
            width: 100%;
            min-height: 200px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: #2d2d2d;
            color: #f8f8f2;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 rgba(0,0,0,0.25);
        }

        button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.2);
        }

        .btn-generate {
            background: linear-gradient(135deg, #FF7D00 0%, #FFE500 100%);
            color: white;
        }

        .btn-download {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            display: none;
        }

        .output-section {
            display: none;
            margin-top: 30px;
        }

        .xml-output {
            width: 100%;
            min-height: 300px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            padding: 15px;
            border: 2px solid #4CAF50;
            border-radius: 8px;
            background: #2d2d2d;
            color: #f8f8f2;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #4CAF50;
            margin-bottom: 20px;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #dc3545;
            margin-bottom: 20px;
        }

        .info-box {
            background: #fff9e6;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #FFE500;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: #666;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #FF7D00;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Blog RSS-Feed Generator</h1>
        <p class="subtitle">Erstelle automatisch einen RSS-Feed aus deiner blog-posts.json Datei</p>

        <div class="info-box">
            ‚ÑπÔ∏è <strong>So funktioniert's:</strong> F√ºge deine Konfiguration und JSON-Daten ein, 
            klicke auf "RSS generieren" und lade die fertige XML-Datei als <code>blog-feed.xml</code> herunter!
        </div>

        <!-- Konfiguration -->
        <div class="section">
            <h2>‚öôÔ∏è Konfiguration</h2>
            
            <label>Website URL *</label>
            <input type="url" id="siteUrl" placeholder="https://dein-username.github.io/dein-repo-name" required>
            
            <label>Blog Titel *</label>
            <input type="text" id="blogTitle" value="Dein Ernst?! - Blog" required>
            
            <label>Blog Beschreibung</label>
            <textarea id="blogDescription" rows="2">Feministische Alltagsgeschichten ‚Äì faktenbasiert aber mit ganz viel Humor!</textarea>
            
            <label>Autor Name</label>
            <input type="text" id="authorName" value="Dein Ernst?! Team">
            
            <label>Autor E-Mail</label>
            <input type="email" id="authorEmail" value="podcast.dein.ernst@gmail.com">
        </div>

        <!-- JSON Input -->
        <div class="section">
            <h2>üìÑ Blog-Posts JSON</h2>
            <label>F√ºge hier deine blog-posts.json Daten ein:</label>
            <textarea class="json-input" id="jsonInput" placeholder='{"posts": [...]}'></textarea>
        </div>

        <!-- Buttons -->
        <div class="button-group">
            <button class="btn-generate" onclick="generateRSS()">üöÄ RSS generieren</button>
            <button class="btn-download" id="downloadBtn" onclick="downloadRSS()">üíæ RSS herunterladen</button>
        </div>

        <!-- Output -->
        <div class="output-section" id="outputSection">
            <div class="section">
                <h2>‚úÖ Generierter RSS-Feed</h2>
                <div id="statusMessage"></div>
                <textarea class="xml-output" id="xmlOutput" readonly></textarea>
            </div>
        </div>
    </div>

    <script>
        let generatedXML = '';

        function generateRSS() {
            try {
                // Hole Konfiguration
                const config = {
                    siteUrl: document.getElementById('siteUrl').value.trim(),
                    blogTitle: document.getElementById('blogTitle').value.trim(),
                    blogDescription: document.getElementById('blogDescription').value.trim(),
                    authorName: document.getElementById('authorName').value.trim(),
                    authorEmail: document.getElementById('authorEmail').value.trim()
                };

                // Validierung
                if (!config.siteUrl) {
                    throw new Error('Bitte gib die Website-URL ein!');
                }

                // Parse JSON
                const jsonInput = document.getElementById('jsonInput').value.trim();
                if (!jsonInput) {
                    throw new Error('Bitte f√ºge die blog-posts.json Daten ein!');
                }

                const data = JSON.parse(jsonInput);
                
                if (!data.posts || !Array.isArray(data.posts)) {
                    throw new Error('Keine Blog-Posts im JSON gefunden! Stelle sicher, dass ein "posts" Array vorhanden ist.');
                }

                // Sortiere Posts nach Datum
                const sortedPosts = data.posts.sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );

                // Generiere RSS-XML
                const rssXml = `<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>${escapeXml(config.blogTitle)}</title>
        <link>${config.siteUrl}/blog.html</link>
        <description>${escapeXml(config.blogDescription)}</description>
        <language>de-DE</language>
        <copyright>2026 ${escapeXml(config.blogTitle)}</copyright>
        <managingEditor>${config.authorEmail} (${config.authorName})</managingEditor>
        <webMaster>${config.authorEmail} (${config.authorName})</webMaster>
        <lastBuildDate>${new Date().toUTCString()}</lastBuildDate>
        <atom:link href="${config.siteUrl}/blog-feed.xml" rel="self" type="application/rss+xml" />
        
${sortedPosts.map(post => generateRSSItem(post, config.siteUrl, config.authorEmail, config.authorName)).join('\n')}
    </channel>
</rss>`;

                // Zeige Output
                generatedXML = rssXml;
                document.getElementById('xmlOutput').value = rssXml;
                document.getElementById('outputSection').style.display = 'block';
                document.getElementById('downloadBtn').style.display = 'block';
                
                document.getElementById('statusMessage').innerHTML = `
                    <div class="success">
                        <strong>‚úì Erfolgreich!</strong><br>
                        ${sortedPosts.length} Blog-Post${sortedPosts.length !== 1 ? 's' : ''} in RSS-Feed eingetragen.<br>
                        Klicke auf "RSS herunterladen" und lade die Datei als <code>blog-feed.xml</code> in dein GitHub Repository hoch!
                    </div>
                `;

                // Scroll zum Output
                document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                document.getElementById('statusMessage').innerHTML = `
                    <div class="error">
                        <strong>‚ùå Fehler:</strong><br>
                        ${error.message}
                    </div>
                `;
                document.getElementById('outputSection').style.display = 'block';
                document.getElementById('xmlOutput').value = '';
                document.getElementById('downloadBtn').style.display = 'none';
            }
        }

        function generateRSSItem(post, siteUrl, authorEmail, authorName) {
            const fullUrl = `${siteUrl}/${post.url}`;
            const pubDate = new Date(post.date).toUTCString();
            
            return `        <item>
            <title>${escapeXml(post.title)}</title>
            <link>${fullUrl}</link>
            <guid isPermaLink="true">${fullUrl}</guid>
            <description>${escapeXml(post.excerpt || '')}</description>
            <pubDate>${pubDate}</pubDate>
            <author>${authorEmail} (${authorName})</author>
        </item>`;
        }

        function escapeXml(text) {
            if (!text) return '';
            return String(text)
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&apos;');
        }

        function downloadRSS() {
            const blob = new Blob([generatedXML], { type: 'application/xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'blog-feed.xml';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
